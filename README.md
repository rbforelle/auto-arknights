# auto-arknights

明日方舟自动刷图脚本

本脚本基于[网易Airtest](https://airtest.readthedocs.io/zh_CN/latest/)。这是网易开发的手机自动测试框架，提供了方便易用的识图点击功能，不需要自己手动实现了。

脚本通过官方的Airtest IDE执行。Airtest IDE提供方便的设备连接功能，支持手机和模拟器。还可以监控脚本执行，提供执行报告，不再需要手动实现界面。

## 安装

下载Airtest IDE
<http://airtest.netease.com/>

不需要安装，直接解压找到exe文件运行

## 使用

### 连接设备

打开airtest ide，在device screen中选择对应的设备连接，如有连接问题请查看airtest ide文档

- 安卓手机
插上线授予权限之后应该就能在移动设备连接的窗口中看到对应的设备，点connect连接即可

- 安卓模拟器
模拟器需要在远程设备连接选项下输入对应的端口号连接。
注意模拟器中需允许远程连接，不同模拟器使用的端口号不同，可自行百度查询

- ios
理论上也支持，但我没有ios设备无法测试，请自行查询官方文档

### 执行脚本

- 选择关卡
  在设备中打开游戏，手动选择好要刷的关卡，勾选代理指挥。

- 打开脚本
  文件 - 打开脚本 - 选择auto-arknights.air文件夹
  注意一定要选择.air结尾的文件夹，会自动识别文件夹内同名的python文件

- 设置刷图次数

  ```python
  # 刷图10次
  auto_arknights(10)
  ```

- 点击执行

  脚本通过图标检测任务是否完成，检测timeout可以在代码中设置。默认每次任务等待20分钟，剿灭作战最多也就需要这么久。超时脚本自动退出。

### log

每完成一次关卡，或出现错误时会自动截图，保存在`/log/截图/`下
